<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä» 0 æ­å»º vue3+vite+typescript ä¼ä¸šçº§é¡¹ç›® | crise&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="./assets/logo.png">
    <meta name="description" content="ä¸€åç¨‹åºå‘˜/å‰ç«¯äººçš„æŠ€æœ¯åšå®¢">
    
    <link rel="preload" href="/assets/css/0.styles.567624d3.css" as="style"><link rel="preload" href="/assets/js/app.92dc81f6.js" as="script"><link rel="preload" href="/assets/js/2.2d54ebdc.js" as="script"><link rel="preload" href="/assets/js/5.1898d05c.js" as="script"><link rel="prefetch" href="/assets/js/10.01084cac.js"><link rel="prefetch" href="/assets/js/11.bac0121f.js"><link rel="prefetch" href="/assets/js/12.4e876679.js"><link rel="prefetch" href="/assets/js/13.d3fce123.js"><link rel="prefetch" href="/assets/js/14.75510bd2.js"><link rel="prefetch" href="/assets/js/15.48750021.js"><link rel="prefetch" href="/assets/js/16.7952a809.js"><link rel="prefetch" href="/assets/js/17.10b72fbd.js"><link rel="prefetch" href="/assets/js/18.13c83f7d.js"><link rel="prefetch" href="/assets/js/19.31948ab8.js"><link rel="prefetch" href="/assets/js/20.dc4c0c1c.js"><link rel="prefetch" href="/assets/js/21.1b255fe0.js"><link rel="prefetch" href="/assets/js/22.2f1d66a8.js"><link rel="prefetch" href="/assets/js/23.cf0fa840.js"><link rel="prefetch" href="/assets/js/24.9cf68851.js"><link rel="prefetch" href="/assets/js/25.c501abdb.js"><link rel="prefetch" href="/assets/js/26.5f6dd563.js"><link rel="prefetch" href="/assets/js/27.74260c5a.js"><link rel="prefetch" href="/assets/js/28.ce8f13bc.js"><link rel="prefetch" href="/assets/js/29.06bdce57.js"><link rel="prefetch" href="/assets/js/3.e9d5348e.js"><link rel="prefetch" href="/assets/js/30.8204335f.js"><link rel="prefetch" href="/assets/js/31.01971e34.js"><link rel="prefetch" href="/assets/js/32.c9d7df95.js"><link rel="prefetch" href="/assets/js/33.96b6de7c.js"><link rel="prefetch" href="/assets/js/34.b813165e.js"><link rel="prefetch" href="/assets/js/35.615aded7.js"><link rel="prefetch" href="/assets/js/36.9c619b20.js"><link rel="prefetch" href="/assets/js/37.90ffb782.js"><link rel="prefetch" href="/assets/js/38.1967fbbd.js"><link rel="prefetch" href="/assets/js/39.0d735efe.js"><link rel="prefetch" href="/assets/js/4.ca421095.js"><link rel="prefetch" href="/assets/js/40.923e5594.js"><link rel="prefetch" href="/assets/js/41.fd7797b4.js"><link rel="prefetch" href="/assets/js/42.7177cfca.js"><link rel="prefetch" href="/assets/js/43.b745c235.js"><link rel="prefetch" href="/assets/js/44.6fa2e561.js"><link rel="prefetch" href="/assets/js/45.9ecc0f19.js"><link rel="prefetch" href="/assets/js/46.d47edb5a.js"><link rel="prefetch" href="/assets/js/47.f48a72bc.js"><link rel="prefetch" href="/assets/js/48.19da9fb3.js"><link rel="prefetch" href="/assets/js/49.a5d16804.js"><link rel="prefetch" href="/assets/js/50.5efb3589.js"><link rel="prefetch" href="/assets/js/51.6a21aa98.js"><link rel="prefetch" href="/assets/js/52.2947ff47.js"><link rel="prefetch" href="/assets/js/53.dc63262e.js"><link rel="prefetch" href="/assets/js/54.fa9b8371.js"><link rel="prefetch" href="/assets/js/55.d0f31e05.js"><link rel="prefetch" href="/assets/js/56.de8ec14d.js"><link rel="prefetch" href="/assets/js/57.73331274.js"><link rel="prefetch" href="/assets/js/58.4f67425f.js"><link rel="prefetch" href="/assets/js/59.318ec5bd.js"><link rel="prefetch" href="/assets/js/6.c999d008.js"><link rel="prefetch" href="/assets/js/60.f6a602f9.js"><link rel="prefetch" href="/assets/js/61.c659faf6.js"><link rel="prefetch" href="/assets/js/62.4ccc91f2.js"><link rel="prefetch" href="/assets/js/63.6e5e36a9.js"><link rel="prefetch" href="/assets/js/64.2660e08e.js"><link rel="prefetch" href="/assets/js/65.b06b0bed.js"><link rel="prefetch" href="/assets/js/66.1f836a7a.js"><link rel="prefetch" href="/assets/js/67.add88f29.js"><link rel="prefetch" href="/assets/js/68.e74a51fc.js"><link rel="prefetch" href="/assets/js/69.63126800.js"><link rel="prefetch" href="/assets/js/7.92efcfae.js"><link rel="prefetch" href="/assets/js/70.1dc8f877.js"><link rel="prefetch" href="/assets/js/71.856f3fe1.js"><link rel="prefetch" href="/assets/js/72.927e4ce2.js"><link rel="prefetch" href="/assets/js/73.2c1e909e.js"><link rel="prefetch" href="/assets/js/74.c8b565d2.js"><link rel="prefetch" href="/assets/js/75.00537c0a.js"><link rel="prefetch" href="/assets/js/76.492fbce1.js"><link rel="prefetch" href="/assets/js/77.6fb48b9b.js"><link rel="prefetch" href="/assets/js/78.d5aea725.js"><link rel="prefetch" href="/assets/js/8.81eb0648.js"><link rel="prefetch" href="/assets/js/9.1bebc5a8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.567624d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">crise's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  åšå®¢
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•é¢˜åº“
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¾®åš
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  åšå®¢
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•é¢˜åº“
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¾®åš
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jsè¿›é˜¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/engineer/ui-fit.html" class="sidebar-link">ç§»åŠ¨ç«¯UIé€‚é…æ–¹æ¡ˆé€‰æ‹©</a></li><li><a href="/blog/engineer/cli.html" class="sidebar-link">ä» 0 æ‰“é€ å±äºè‡ªå·±çš„è„šæ‰‹æ¶</a></li><li><a href="/blog/engineer/vue3-template.html" aria-current="page" class="active sidebar-link">ä» 0 æ­å»º vue3+vite+typescript ä¼ä¸šçº§é¡¹ç›®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#æ­å»ºå‰å‡†å¤‡" class="sidebar-link">æ­å»ºå‰å‡†å¤‡</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å·²å®ç°çš„åŠŸèƒ½" class="sidebar-link">å·²å®ç°çš„åŠŸèƒ½</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#æ¨¡æ¿ä¾èµ–ç‰ˆæœ¬" class="sidebar-link">æ¨¡æ¿ä¾èµ–ç‰ˆæœ¬</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ç”ŸæˆåŸºæœ¬æ¡†æ¶" class="sidebar-link">ç”ŸæˆåŸºæœ¬æ¡†æ¶</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#åšä¸€äº›ç®€å•çš„é…ç½®" class="sidebar-link">åšä¸€äº›ç®€å•çš„é…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®è·¯ç”±-vue-router4" class="sidebar-link">é…ç½®è·¯ç”±ï¼ˆvue-router4ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…ä¾èµ–" class="sidebar-link">å®‰è£…ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä½¿ç”¨" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆçŠ¶æ€ç®¡ç†åº“-pinia" class="sidebar-link">é›†æˆçŠ¶æ€ç®¡ç†åº“ Pinia</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#pinia-æœ‰å¦‚ä¸‹ç‰¹ç‚¹" class="sidebar-link">Pinia æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä½¿ç”¨-2" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆç§»åŠ¨ç«¯uiç»„ä»¶åº“-vant" class="sidebar-link">é›†æˆç§»åŠ¨ç«¯UIç»„ä»¶åº“ vant</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…-2" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#æŒ‰éœ€å¼•å…¥ç»„ä»¶" class="sidebar-link">æŒ‰éœ€å¼•å…¥ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å¦‚ä½•ä½¿ç”¨" class="sidebar-link">å¦‚ä½•ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ç§»åŠ¨ç«¯uiæ ·å¼ç¨¿é€‚é…" class="sidebar-link">ç§»åŠ¨ç«¯UIæ ·å¼ç¨¿é€‚é…</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆaxiosç»Ÿä¸€è¯·æ±‚å°è£…" class="sidebar-link">é›†æˆaxiosç»Ÿä¸€è¯·æ±‚å°è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…-3" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä½¿ç”¨-3" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®è‡ªåŠ¨å¯¼å…¥vue3-composition-api" class="sidebar-link">é…ç½®è‡ªåŠ¨å¯¼å…¥vue3 compositionÂ api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…-4" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®vite-config-ts" class="sidebar-link">é…ç½®vite.config.ts</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®è‡ªåŠ¨å¼•å…¥vue3è¯­æ³•ç³–" class="sidebar-link">é…ç½®è‡ªåŠ¨å¼•å…¥vue3è¯­æ³•ç³–</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä½¿ç”¨-4" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®-css-é¢„å¤„ç†å™¨-less" class="sidebar-link">é…ç½® css é¢„å¤„ç†å™¨ less</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å®‰è£…-5" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é…ç½®å…¨å±€-less-æ ·å¼" class="sidebar-link">é…ç½®å…¨å±€ less æ ·å¼</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ç»„ä»¶ä¸­ä½¿ç”¨" class="sidebar-link">ç»„ä»¶ä¸­ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ç¯å¢ƒå˜é‡é…ç½®" class="sidebar-link">ç¯å¢ƒå˜é‡é…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä»£ç è´¨é‡é£æ ¼ç»Ÿä¸€" class="sidebar-link">ä»£ç è´¨é‡é£æ ¼ç»Ÿä¸€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-eslint" class="sidebar-link">é›†æˆ eslint</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-prettier" class="sidebar-link">é›†æˆ prettier</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-stylelint" class="sidebar-link">é›†æˆ stylelint</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-husky-lint-staged" class="sidebar-link">é›†æˆ husky + lint-staged</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ä»£ç æäº¤è§„èŒƒç»Ÿä¸€" class="sidebar-link">ä»£ç æäº¤è§„èŒƒç»Ÿä¸€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-commitizen-å®ç°æäº¤è§„èŒƒ" class="sidebar-link">é›†æˆ Commitizen å®ç°æäº¤è§„èŒƒ</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#é›†æˆ-commitlint-éªŒè¯æäº¤è§„èŒƒ" class="sidebar-link">é›†æˆ commitlint éªŒè¯æäº¤è§„èŒƒ</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å•å…ƒæµ‹è¯•" class="sidebar-link">å•å…ƒæµ‹è¯•</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#vite-å¸¸ç”¨åŸºç¡€é…ç½®" class="sidebar-link">Vite å¸¸ç”¨åŸºç¡€é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#åŸºç¡€é…ç½®" class="sidebar-link">åŸºç¡€é…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ-gz-æ–‡ä»¶" class="sidebar-link">ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ .gz æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#æœ€ç»ˆ-vite-config-ts" class="sidebar-link">æœ€ç»ˆ vite.config.ts</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å¸¸ç”¨æ’ä»¶" class="sidebar-link">å¸¸ç”¨æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#éå¸¸æ¨èä½¿ç”¨çš„-hooks-åº“" class="sidebar-link">éå¸¸æ¨èä½¿ç”¨çš„ hooks åº“</a></li><li class="sidebar-sub-header"><a href="/blog/engineer/vue3-template.html#å†™åœ¨æœ€å" class="sidebar-link">å†™åœ¨æœ€å</a></li></ul></li><li><a href="/blog/engineer/library-template.html" class="sidebar-link">ä» 0 æ­å»º rollup + typescript + jest å·¥å…·åº“</a></li><li><a href="/blog/engineer/eslintrc.html" class="sidebar-link">ESLintä½¿ç”¨ã€åŸç†åŠé…ç½®è§„åˆ™è¯¦è§£</a></li><li><a href="/blog/engineer/ci-cd.html" class="sidebar-link">å·¥ç¨‹åŒ–ä¹‹CI/CDæ–¹æ¡ˆæ€»ç»“</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>tsç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/engineer/tsconfig.html" class="sidebar-link">tsconfig.jsoné…ç½®è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>æ‰“åŒ…å·¥å…·</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/engineer/bundle/babel.html" class="sidebar-link">babel</a></li><li><a href="/blog/engineer/bundle/babel-plugin.html" class="sidebar-link">babelå¸¸ç”¨æ’ä»¶</a></li><li><a href="/blog/engineer/bundle/rollup.html" class="sidebar-link">ä¸€æ–‡æ•™ä¼šä½ é…ç½®rollup</a></li><li><a href="/blog/engineer/bundle/rollup-plugin.html" class="sidebar-link">rollupæ’ä»¶è¯¦è§£</a></li><li><a href="/blog/engineer/bundle/vite.html" class="sidebar-link">viteåŸç†ç¯‡</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webè·¨ç«¯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¡†æ¶ä¸åŸç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è®¡ç®—æœºä¸ç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è¿ç»´ä¸å®‰å…¨</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä»-0-æ­å»º-vue3-vite-typescript-ä¼ä¸šçº§é¡¹ç›®"><a href="#ä»-0-æ­å»º-vue3-vite-typescript-ä¼ä¸šçº§é¡¹ç›®" class="header-anchor">#</a> ä» 0 æ­å»º vue3+vite+typescript ä¼ä¸šçº§é¡¹ç›®</h1> <h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>éšç€ vue3.2 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œ<code>&lt;script setup&gt;</code> çš„å®éªŒæ€§æ ‡å¿—å·²ç»å»æ‰ï¼Œå·²ç»é™†é™†ç»­ç»­æœ‰ä¸å°‘å…¬å¸å¼€å§‹ä½¿ç”¨ <code>vue3.2</code>å¼€å‘é¡¹ç›®äº†ã€‚
å› ä¸ºæ¯æ¬¡åœ¨å¼€å‘æ–°é¡¹ç›®æ—¶ï¼Œéƒ½éœ€è¦ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åŸºç¡€æ¡†æ¶ï¼Œé¿å…é‡æ–°å¼€å§‹æ­å»ºè€Œæµªè´¹æ—¶é—´ï¼Œé‚è®°å½•ä¸‹ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªå¼€ç®±å³ç”¨çš„æ¡†æ¶ã€‚è¯¥æ–‡æ—¨åœ¨å¸®åŠ©å¤§å®¶æ­å»ºä¸ºå›¢é˜Ÿå¼€å‘çš„ä¸“å±é¡¹ç›®æ¨¡æ¿ï¼Œæ¨¡æ¿ä¸»ä½“ä¸º vue3+vite+tsã€‚</p> <h2 id="æ­å»ºå‰å‡†å¤‡"><a href="#æ­å»ºå‰å‡†å¤‡" class="header-anchor">#</a> æ­å»ºå‰å‡†å¤‡</h2> <ol><li><code>Vscode</code>: å‰ç«¯äººå¿…å¤‡ç¼–ç ç¥å™¨</li> <li><code>Chrome</code>ï¼šå¯¹å¼€å‘è€…éå¸¸å‹å¥½çš„æµè§ˆå™¨(åæ­£æˆ‘æ˜¯å¾ˆä¾èµ–å®ƒçš„)</li> <li><code>Nodejs</code>&amp;<code>npm</code>ï¼šé…ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œå®‰è£… Node åä½ ä¼šå‘ç° npm ä¹Ÿä¼šä¸€èµ·å®‰è£…ä¸‹æ¥</li> <li><code>Vue.js devtools</code>ï¼šæµè§ˆå™¨è°ƒè¯•æ’ä»¶</li> <li><code>Vue Language Features (Volar)</code>ï¼šVscode å¼€å‘ vue3 å¿…å¤‡æ’ä»¶ï¼Œæä¾›è¯­æ³•é«˜äº®æç¤ºï¼Œéå¸¸å¥½ç”¨</li> <li><code>eslint</code>ï¼švscode æ’ä»¶</li> <li><code>prettier</code>ï¼švscode æ ¼å¼åŒ–æ’ä»¶</li> <li><code>stylelint</code>ï¼švscode æ ¡éªŒ css æ’ä»¶</li> <li><code>stylelint plus</code>ï¼švscode æ ¡éªŒ cssï¼Œä¿å­˜æ ¼å¼åŒ–æ’ä»¶</li> <li><code>Vue 3 Snippets</code>ï¼švscode vue3 å¿«æ·è¾“å…¥æç¤ºæ’ä»¶</li> <li><code>whistle</code>ï¼šåŸºäº Node å®ç°çš„è·¨å¹³å° web è°ƒè¯•ä»£ç†å·¥å…·</li></ol> <h2 id="å·²å®ç°çš„åŠŸèƒ½"><a href="#å·²å®ç°çš„åŠŸèƒ½" class="header-anchor">#</a> å·²å®ç°çš„åŠŸèƒ½</h2> <p>âœ… è¡¨ç¤ºå·²ç»å®ç°çš„åŠŸèƒ½ï¼ŒğŸ“ è¡¨ç¤ºå¾…å®ç°</p> <table><thead><tr><th>åŠŸèƒ½</th> <th>çŠ¶æ€</th></tr></thead> <tbody><tr><td>vue-router4</td> <td>âœ…</td></tr> <tr><td><code>vuex</code>çŠ¶æ€ç®¡ç†å·¥å…·<a href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer">pinia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> + æ•°æ®æŒä¹…åŒ–å·¥å…·<a href="https://github.com/prazdevs/pinia-plugin-persistedstate" target="_blank" rel="noopener noreferrer">pinia-plugin-persistedstate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>âœ…</td></tr> <tr><td>UI ç»„ä»¶åº“ + å·¥å…·åº“</td> <td>âœ…</td></tr> <tr><td>ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ<a href="https://github.com/evrone/postcss-px-to-viewport" target="_blank" rel="noopener noreferrer">postcss-px-to-viewport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>âœ…</td></tr> <tr><td>è‡ªåŠ¨å¯¼å…¥ compositionÂ api å’Œ ç”Ÿæˆå…¨å±€ typescript è¯´æ˜<a href="https://github.com/antfu/unplugin-auto-import" target="_blank" rel="noopener noreferrer">unplugin-auto-import<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>âœ…</td></tr> <tr><td>æ”¯æŒ vue3 è¯­æ³•ç³–($ref,$computed,$...)</td> <td>âœ…</td></tr> <tr><td>é…ç½® <code>alias</code> åˆ«å</td> <td>âœ…</td></tr> <tr><td>é…ç½® <code>proxy</code> è·¨åŸŸï¼Œæ”¯æŒåœ¨çº¿ mock</td> <td>âœ…</td></tr> <tr><td>çº¦æŸç¼–ç é£æ ¼ï¼š<code>eslint</code> + <code>eslint/typescript</code> + <code>prettier</code>ä¿å­˜æ ¼å¼åŒ–</td> <td>âœ…</td></tr> <tr><td>ä»£ç æäº¤å¼ºåˆ¶æ ¡éªŒï¼š<code>husky</code> + <code>lint-staged</code></td> <td>âœ…</td></tr> <tr><td>ä»£ç æäº¤ log è§„èŒƒæ ¡éªŒï¼š<code>commitizen</code></td> <td>âœ…</td></tr> <tr><td>ä»£ç ä¾èµ–åˆ†æå·¥å…·ï¼š<code>rollup-plugin-visualizer</code></td> <td>âœ…</td></tr> <tr><td>å…¼å®¹ä¼ ç»Ÿæµè§ˆå™¨ï¼š<code>@vitejs/plugin-legacy</code></td> <td>âœ…</td></tr> <tr><td>ä½¿ç”¨<code>gzip</code>æˆ–è€…<code>brotli</code>æ¥å‹ç¼©èµ„æºï¼š<code>vite-plugin-compression</code></td> <td>âœ…</td></tr> <tr><td>åŸ‹ç‚¹å·¥å…·<code>tracker</code>æ”¯æŒ</td> <td>âœ…</td></tr> <tr><td><code>nativeSDK</code>æ”¯æŒ</td> <td>âœ…</td></tr> <tr><td><code>SSR</code>æ”¯æŒ</td> <td>ğŸ“</td></tr> <tr><td>æ”¯æŒ<code>PC</code>ç«¯æ¡†æ¶</td> <td>ğŸ“</td></tr> <tr><td><code>vite-plugin-vconsole</code>æµ‹è¯•ç¯å¢ƒæ·»åŠ  vconsole</td> <td>ğŸ“</td></tr> <tr><td><code>vite-plugin-commonjs</code>æ”¯æŒ commonjs</td> <td>ğŸ“</td></tr> <tr><td><code>medusha</code>éƒ¨ç½²è„šæœ¬</td> <td>ğŸ“</td></tr></tbody></table> <h2 id="æ¨¡æ¿ä¾èµ–ç‰ˆæœ¬"><a href="#æ¨¡æ¿ä¾èµ–ç‰ˆæœ¬" class="header-anchor">#</a> æ¨¡æ¿ä¾èµ–ç‰ˆæœ¬</h2> <ul><li><code>nodeï¼š&gt;=v12.0.0</code></li> <li><code>viteï¼š^2.8.0</code></li> <li><code>vueï¼š^3.2.25</code></li> <li><code>typescriptï¼š^4.6.2</code></li> <li><code>piniaï¼š^2.0.12</code></li> <li><code>vue-routerï¼š^4.0.13</code></li> <li><code>vueuseï¼š^8.2.0</code></li> <li><code>eslintï¼š^8.10.0</code></li> <li><code>prettierï¼š^2.5.1</code></li> <li><code>postcssï¼š^8.4.12</code></li> <li><code>stylelint: ^14.6.1</code></li> <li><code>huskyï¼š^7.0.4</code></li> <li><code>commitizenï¼š^4.2.4</code></li></ul> <h2 id="ç”ŸæˆåŸºæœ¬æ¡†æ¶"><a href="#ç”ŸæˆåŸºæœ¬æ¡†æ¶" class="header-anchor">#</a> ç”ŸæˆåŸºæœ¬æ¡†æ¶</h2> <ol><li>ä½¿ç”¨å®˜æ–¹æä¾› Vue3/ Vite ç‰ˆæœ¬çš„æ¨¡æ¿æ¥ç”Ÿæˆæˆ‘ä»¬çš„åŸºç¡€é¡¹ç›®ã€‚</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># npm 6.x</span>
<span class="token function">npm</span> create vite@latest my-vue-app --template vue-ts

<span class="token comment"># npm 7+, extra double-dash is needed:</span>
<span class="token function">npm</span> create vite@latest my-vue-app -- --template vue-ts

<span class="token comment"># yarn</span>
<span class="token function">yarn</span> create vite my-vue-app --template vue-ts

<span class="token comment"># pnpm</span>
<span class="token function">pnpm</span> create vite my-vue-app -- --template vue-ts
</code></pre></div><ol start="2"><li>ä½¿ç”¨<code>pnpm</code>å®‰è£…ä¾èµ–ï¼Œå›ºå®šä¾èµ–åŒ…ç‰ˆæœ¬å·</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># å®‰è£…ä¾èµ–</span>
<span class="token function">pnpm</span> i

<span class="token comment"># è¿è¡Œ</span>
<span class="token function">pnpm</span> dev
</code></pre></div><h2 id="åšä¸€äº›ç®€å•çš„é…ç½®"><a href="#åšä¸€äº›ç®€å•çš„é…ç½®" class="header-anchor">#</a> åšä¸€äº›ç®€å•çš„é…ç½®</h2> <p>åŸºç¡€æ¨¡æ¿ä¸­åŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆçš„åŸºç¡€æ¡†æ¶æ·»åŠ ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®ã€‚</p> <ul><li>é…ç½®åˆ«å @ æ¥è¡¨ç¤º src ç›®å½•</li> <li>é…ç½® mock ä»£ç†</li> <li>é…ç½® hmr è§£å†³åˆ©ç”¨<a href="https://github.com/avwo/whistle" target="_blank" rel="noopener noreferrer">whistle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å¼€å‘é¡µé¢ä¸æ–­åˆ·æ–°çš„é—®é¢˜</li></ul> <ol><li>ä¿®æ”¹ <code>vite.config.ts</code> æ–‡ä»¶</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®åˆ«å</span>
        alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'@'</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å¼€å‘æœåŠ¡å™¨é…ç½®</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
      port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
      hmr<span class="token operator">:</span> <span class="token punctuation">{</span>
        protocol<span class="token operator">:</span> <span class="token string">'ws'</span><span class="token punctuation">,</span>
        host<span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// è®¾ç½® https ä»£ç†</span>
      proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            target<span class="token operator">:</span> <span class="token string">'your mock remote https address'</span><span class="token punctuation">,</span>
            changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div></details> <ol start="2"><li>è¿™æ—¶å€™é¡¹ç›®æ–‡ä»¶ä¼šæç¤º<code>ts</code>é”™è¯¯ï¼š</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡</summary> <p><img src="/assets/img/type_node.071f38a0.png" alt="tsé”™è¯¯"></p></details> <p>ä¸ºä¿è¯ node ä½¿ç”¨ï¼Œå®‰è£…<code>@types/node</code>:
<code>@types/node</code>ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨ nodejs api æä¾›äº†<code>.d.ts</code>è¿™æ ·çš„å¸¦æœ‰ç±»å‹æ³¨è§£çš„å¯¼å‡ºå£°æ˜</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i @types/node -D
</code></pre></div><ol start="3"><li>åœ¨ <code>tsconfig.json</code> ä¸­æ·»åŠ é…ç½®ï¼Œä½¿ç¼–è¾‘å™¨å¯ä»¥è¯†åˆ«æˆ‘ä»¬çš„åˆ«åã€‚</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é…ç½®è·¯ç”±-vue-router4"><a href="#é…ç½®è·¯ç”±-vue-router4" class="header-anchor">#</a> é…ç½®è·¯ç”±ï¼ˆvue-router4ï¼‰</h2> <h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="header-anchor">#</a> å®‰è£…ä¾èµ–</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i vue-router --save
</code></pre></div><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨</h3> <ol><li>æ–°å»º <code>src/router</code> ç›®å½•å¹¶åœ¨å…¶ä¸‹é¢åˆ›å»º <code>index.ts</code>ï¼Œå¯¼å‡º router</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">,</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Index&quot;</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;é¦–é¡µ&quot;</span><span class="token punctuation">,</span>
      keepAlive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      requireAuth<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/pages/index.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;List&quot;</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;åˆ—è¡¨é¡µ&quot;</span><span class="token punctuation">,</span>
      keepAlive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      requireAuth<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/pages/list.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div></details> <ol start="2"><li>åœ¨ <code>main.ts</code> ä¸­å¼•å…¥å¹¶ä½¿ç”¨</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code> <span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
 <span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
 <span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span><span class="token punctuation">;</span>

 <span class="token comment">// åˆ›å»ºvueå®ä¾‹</span>
 <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// æŒ‚è½½å®ä¾‹</span>
 app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>ä¿®æ”¹App.vue</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="é›†æˆçŠ¶æ€ç®¡ç†åº“-pinia"><a href="#é›†æˆçŠ¶æ€ç®¡ç†åº“-pinia" class="header-anchor">#</a> é›†æˆçŠ¶æ€ç®¡ç†åº“ Pinia</h2> <blockquote><p><a href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer">Pinia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæ˜¯ Vue å®˜æ–¹å›¢é˜Ÿæ¨èä»£æ›¿<code>Vuex</code>çš„ä¸€æ¬¾è½»é‡çº§çŠ¶æ€ç®¡ç†åº“ã€‚ç”±äº vuex 4 å¯¹ typescript çš„æ”¯æŒè®©äººæ„Ÿåˆ°éš¾è¿‡ï¼Œæ‰€ä»¥çŠ¶æ€ç®¡ç†å¼ƒç”¨äº† vuexã€‚</p></blockquote> <h3 id="pinia-æœ‰å¦‚ä¸‹ç‰¹ç‚¹"><a href="#pinia-æœ‰å¦‚ä¸‹ç‰¹ç‚¹" class="header-anchor">#</a> Pinia æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</h3> <ul><li>å®Œæ•´çš„ typescript çš„æ”¯æŒï¼›</li> <li>è¶³å¤Ÿè½»é‡ï¼Œå‹ç¼©åçš„ä½“ç§¯åªæœ‰ 1.6kb;</li> <li>å»é™¤ mutationsï¼Œåªæœ‰ stateï¼Œgettersï¼Œactionsï¼ˆè¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªç‰¹ç‚¹ï¼‰ï¼›</li> <li>actions æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼›</li> <li>æ²¡æœ‰æ¨¡å—åµŒå¥—ï¼Œåªæœ‰ store çš„æ¦‚å¿µï¼Œstore ä¹‹é—´å¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œæ›´å¥½çš„ä»£ç åˆ†å‰²ï¼›</li> <li>æ— éœ€æ‰‹åŠ¨æ·»åŠ  storeï¼Œstore ä¸€æ—¦åˆ›å»ºä¾¿ä¼šè‡ªåŠ¨æ·»åŠ ï¼›</li></ul> <h3 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i pinia -S
</code></pre></div><h3 id="ä½¿ç”¨-2"><a href="#ä½¿ç”¨-2" class="header-anchor">#</a> ä½¿ç”¨</h3> <ol><li>æ–°å»º src/store ç›®å½•å¹¶åœ¨å…¶ä¸‹é¢åˆ›å»º index.tsï¼Œå¯¼å‡º store</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div></details> <ol start="2"><li>åœ¨ main.ts ä¸­å¼•å…¥å¹¶ä½¿ç”¨</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºvueå®ä¾‹</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‚è½½pinia</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‚è½½å®ä¾‹</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>å®šä¹‰ Stateï¼š åœ¨ src/store ä¸‹é¢åˆ›å»ºä¸€ä¸ª city.ts</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCityStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token comment">// idå¿…å¡«ï¼Œä¸”éœ€è¦å”¯ä¸€</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">updateName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="4"><li>è·å– Stateï¼š åœ¨ src/components/city.vue ä¸­ä½¿ç”¨</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ cityStore.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCityStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store/city&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cityStore <span class="token operator">=</span> <span class="token function">useCityStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <ol start="5"><li>ä¿®æ”¹ Stateï¼š</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCityStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store/city&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cityStore <span class="token operator">=</span> <span class="token function">useCityStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1. ç›´æ¥ä¿®æ”¹ state ï¼ˆä¸å»ºè®®ï¼‰</span>
cityStore<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 2. é€šè¿‡ actions å»ä¿®æ”¹</span>
cityStore<span class="token punctuation">.</span><span class="token function">updateName</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸Šæµ·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <h2 id="é›†æˆç§»åŠ¨ç«¯uiç»„ä»¶åº“-vant"><a href="#é›†æˆç§»åŠ¨ç«¯uiç»„ä»¶åº“-vant" class="header-anchor">#</a> é›†æˆç§»åŠ¨ç«¯UIç»„ä»¶åº“ <a href="https://youzan.github.io/vant/#/zh-CN/home" target="_blank" rel="noopener noreferrer">vant<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <blockquote><p>ç»„ä»¶åº“é€‰æ‹©ä¸Šä¸åšä»»ä½•å¼ºåˆ¶ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®éœ€è¦é€‰æ‹©åˆé€‚çš„ç»„ä»¶åº“å³å¯</p></blockquote> <h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> i vant
</code></pre></div><h3 id="æŒ‰éœ€å¼•å…¥ç»„ä»¶"><a href="#æŒ‰éœ€å¼•å…¥ç»„ä»¶" class="header-anchor">#</a> æŒ‰éœ€å¼•å…¥ç»„ä»¶</h3> <p>åœ¨ vite é¡¹ç›®ä¸­ä½¿ç”¨ Vant æ—¶ï¼Œæ¨èå®‰è£… <code>vite-plugin-style-import</code> æ’ä»¶ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶çš„æ ·å¼ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i vite-plugin-style-import@1.4.1 -D
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œåœ¨ vite.config.ts æ–‡ä»¶ä¸­é…ç½®æ’ä»¶ï¼š</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styleImport<span class="token punctuation">,</span> <span class="token punctuation">{</span> VantResolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-style-import'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">styleImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolves<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">VantResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨</h3> <p><code>vant</code> é»˜è®¤æ”¯æŒé€šè¿‡ Tree Shaking å®ç° script çš„æŒ‰éœ€å¼•å…¥ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span><span class="token punctuation">&gt;</span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ç§»åŠ¨ç«¯uiæ ·å¼ç¨¿é€‚é…"><a href="#ç§»åŠ¨ç«¯uiæ ·å¼ç¨¿é€‚é…" class="header-anchor">#</a> ç§»åŠ¨ç«¯UIæ ·å¼ç¨¿é€‚é…</h3> <blockquote><p>Vant é»˜è®¤ä½¿ç”¨ px ä½œä¸ºæ ·å¼å•ä½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ viewport å•ä½ (vw, vh, vmin, vmax)ï¼Œæ¨èä½¿ç”¨ <a href="https://github.com/evrone/postcss-px-to-viewport" target="_blank" rel="noopener noreferrer">postcss-px-to-viewport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œè½¬æ¢ã€‚</p></blockquote> <p><code>postcss-px-to-viewport</code> æ˜¯ä¸€æ¬¾ PostCSS æ’ä»¶ï¼Œç”¨äºå°† px å•ä½è½¬åŒ–ä¸º vw/vh å•ä½ã€‚</p> <p>ä¸‹é¢æä¾›äº†ä¸€ä»½åŸºæœ¬çš„ <code>PostCSS</code> ç¤ºä¾‹é…ç½®ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®çš„åŸºç¡€ä¸Šæ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>vant UIè®¾è®¡ç¨¿é»˜è®¤æ˜¯375px</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'postcss-px-to-viewport'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">viewportWidth</span><span class="token operator">:</span> <span class="token number">375</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœä½ å½“å‰é¡¹ç›®è®¾è®¡ç¨¿é»˜è®¤æ˜¯750pxï¼Œå°±å¾—æ ¹æ®ä¸åŒæ–‡ä»¶è¿›è¡Œå¯¹åº”çš„è§†å£å®½åº¦è½¬æ¢</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <p>é¦–å…ˆå®‰è£…åŸºäº<code>postcss-px-to-viewport</code>çš„è¡ç”Ÿåº“</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i -D @jonny1994/postcss-px-to-viewport
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token string-property property">'@jonny1994/postcss-px-to-viewport'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">unitToConvert</span><span class="token operator">:</span> <span class="token string">'px'</span><span class="token punctuation">,</span> <span class="token comment">// éœ€è¦è½¬æ¢çš„å•ä½ï¼Œé»˜è®¤ä¸º&quot;px&quot;</span>
      <span class="token literal-property property">viewportWidth</span><span class="token operator">:</span> <span class="token number">750</span><span class="token punctuation">,</span>
      <span class="token literal-property property">unitPrecision</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// å•ä½è½¬æ¢åä¿ç•™çš„ç²¾åº¦</span>
      <span class="token literal-property property">propList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// èƒ½è½¬åŒ–ä¸º vw çš„å±æ€§åˆ—è¡¨</span>
      <span class="token literal-property property">viewportUnit</span><span class="token operator">:</span> <span class="token string">'vw'</span><span class="token punctuation">,</span> <span class="token comment">// å¸Œæœ›ä½¿ç”¨çš„è§†çª—å•ä½</span>
      <span class="token literal-property property">fontViewportUnit</span><span class="token operator">:</span> <span class="token string">'vw'</span><span class="token punctuation">,</span> <span class="token comment">// å­—ä½“ä½¿ç”¨çš„è§†çª—å•ä½</span>
      <span class="token literal-property property">selectorBlackList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// éœ€è¦å¿½ç•¥çš„ CSS é€‰æ‹©å™¨ï¼Œä¸ä¼šè½¬ä¸ºè§†çª—å•ä½ï¼Œä½¿ç”¨åŸæœ‰çš„ px ç­‰å•ä½</span>
      <span class="token literal-property property">minPixelValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// è®¾ç½®æœ€å°çš„è½¬æ¢æ•°å€¼ï¼Œå¦‚æœä¸º 1 çš„è¯ï¼Œåªæœ‰å¤§äº 1 çš„å€¼ä¼šè¢«è½¬æ¢</span>
      <span class="token literal-property property">mediaQuery</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// åª’ä½“æŸ¥è¯¢é‡Œçš„å•ä½æ˜¯å¦éœ€è¦è½¬æ¢å•ä½</span>
      <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦ç›´æ¥æ›´æ¢å±æ€§å€¼ï¼Œè€Œä¸æ·»åŠ å¤‡ç”¨å±æ€§</span>
      <span class="token literal-property property">landscape</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦å¤„ç†æ¨ªå±æƒ…å†µ,æ˜¯å¦æ·»åŠ æ ¹æ® landscapeWidth ç”Ÿæˆçš„åª’ä½“æŸ¥è¯¢æ¡ä»¶</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">vant</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// è·¯å¾„çš„æ­£åˆ™æˆ–è€…å­—ç¬¦ä¸²</span>
          <span class="token punctuation">(</span><span class="token parameter">pixels<span class="token punctuation">,</span> parsedVal<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>prop<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'font'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parsedVal <span class="token operator">*</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vmin</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parsedVal <span class="token operator">*</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vw</span><span class="token template-punctuation string">`</span></span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <h2 id="é›†æˆaxiosç»Ÿä¸€è¯·æ±‚å°è£…"><a href="#é›†æˆaxiosç»Ÿä¸€è¯·æ±‚å°è£…" class="header-anchor">#</a> é›†æˆaxiosç»Ÿä¸€è¯·æ±‚å°è£…</h2> <blockquote><p>axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚</p></blockquote> <h3 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i axios
</code></pre></div><h3 id="ä½¿ç”¨-3"><a href="#ä½¿ç”¨-3" class="header-anchor">#</a> ä½¿ç”¨</h3> <p>å®é™…ä½¿ç”¨ä¸­å¯ä»¥æ ¹æ®é¡¹ç›®ä¿®æ”¹ï¼Œæ¯”å¦‚<code>RESTful</code> <code>api</code>ä¸­å¯ä»¥è‡ªè¡Œæ·»åŠ <code>put</code>å’Œ<code>delete</code>è¯·æ±‚,<code>ResType</code>ä¹Ÿå¯ä»¥æ ¹æ®åç«¯çš„é€šç”¨è¿”å›å€¼åŠ¨æ€çš„å»ä¿®æ”¹ã€‚</p> <ol><li>æ–°å»º <code>src/network/axios.ts</code>ï¼Œç”¨äº<code>axios</code>å°è£…</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code> <span class="token keyword">import</span> axios<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosResponse<span class="token punctuation">,</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

 <span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Request interceptors</span>
 service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
     <span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// do something</span>
         <span class="token keyword">return</span> config<span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Response interceptors</span>
 service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
     <span class="token keyword">async</span> <span class="token punctuation">(</span>response<span class="token operator">:</span> AxiosResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// do something</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// do something</span>
         <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">export</span> <span class="token keyword">default</span> service<span class="token punctuation">;</span>
</code></pre></div></details> <ol start="2"><li>æ–°å»º <code>src/network/user/index.ts</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/network/axios'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IResponseType<span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    code<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    status<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    msg<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    data<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ILogin</span> <span class="token punctuation">{</span>
    token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    expires<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span>username<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>IResponseType<span class="token operator">&lt;</span>ILogin<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'/api/auth/login'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
            username<span class="token punctuation">,</span>
            password
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>ç”±äºä½¿ç”¨äº† typescriptï¼Œæ‰€ä»¥éœ€æ–°å¢ <code>types/shims-axios.d.ts</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'axios'</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AxiosInstance</span> <span class="token punctuation">{</span>
        <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">head</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">put</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token generic-function"><span class="token function">patch</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <ol start="4"><li>åœ¨ <code>src/pages/user.vue</code> é¡µé¢ä¸­ä½¿ç”¨</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token constant">API</span> <span class="token keyword">from</span> <span class="token string">'@/network/user'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">requestRes</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <p>é™¤äº†è‡ªå·±æ‰‹åŠ¨å°è£… axios ,è¿™é‡Œæ¨èä¸€ä¸ª vue3 çš„è¯·æ±‚å°è£…åº“: <a href="https://www.attojs.com/" target="_blank" rel="noopener noreferrer">VueRequest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,éå¸¸å¥½ç”¨ã€‚</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹åŠŸèƒ½ä»‹ç»</summary> <ul><li>ğŸš€ æ‰€æœ‰æ•°æ®éƒ½å…·æœ‰å“åº”å¼</li> <li>ğŸ”„ è½®è¯¢è¯·æ±‚</li> <li>ğŸ¤– è‡ªåŠ¨å¤„ç†é”™è¯¯é‡è¯•</li> <li>ğŸ—„ å†…ç½®è¯·æ±‚ç¼“å­˜</li> <li>ğŸ’§ èŠ‚æµè¯·æ±‚ä¸é˜²æŠ–è¯·æ±‚</li> <li>ğŸ¯ èšç„¦é¡µé¢æ—¶è‡ªåŠ¨é‡æ–°è¯·æ±‚</li> <li>âš™ï¸ å¼ºå¤§çš„åˆ†é¡µæ‰©å±•ä»¥åŠåŠ è½½æ›´å¤šæ‰©å±•</li> <li>ğŸ“  å®Œå…¨ä½¿ç”¨ Typescript ç¼–å†™ï¼Œå…·æœ‰å¼ºå¤§çš„ç±»å‹æç¤º</li> <li>âš¡ï¸ å…¼å®¹ Vite</li> <li>ğŸƒ è½»é‡åŒ–</li> <li>ğŸ“¦ å¼€ç®±å³ç”¨</li></ul></details> <h2 id="é…ç½®è‡ªåŠ¨å¯¼å…¥vue3-composition-api"><a href="#é…ç½®è‡ªåŠ¨å¯¼å…¥vue3-composition-api" class="header-anchor">#</a> é…ç½®è‡ªåŠ¨å¯¼å…¥vue3 compositionÂ api</h2> <h3 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i unplugin-auto-import -D
</code></pre></div><h3 id="é…ç½®vite-config-ts"><a href="#é…ç½®vite-config-ts" class="header-anchor">#</a> é…ç½®<code>vite.config.ts</code></h3> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[tj]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .ts, .tsx, .js, .jsx</span>
        <span class="token operator">/</span>\<span class="token punctuation">.</span>vue$<span class="token operator">/</span><span class="token punctuation">,</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue\?vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .vue</span>
        <span class="token operator">/</span>\<span class="token punctuation">.</span>md$<span class="token operator">/</span><span class="token punctuation">,</span> <span class="token comment">// .md</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      imports<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue'</span><span class="token punctuation">,</span>
        <span class="token string">'vue/macros'</span><span class="token punctuation">,</span>
        <span class="token string">'vue-router'</span><span class="token punctuation">,</span>
        <span class="token string">'pinia'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      eslintrc<span class="token operator">:</span> <span class="token punctuation">{</span>
        enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// ç¬¬ä¸€æ¬¡enabledå¾—è®¾æˆtrueï¼Œè‡ªåŠ¨ç”Ÿæˆeslintrc-auto-import.jsonå’Œauto-imports.d.tsæ–‡ä»¶</span>
        filepath<span class="token operator">:</span>  <span class="token string">'./.eslintrc-auto-import.json'</span><span class="token punctuation">,</span>
        globalsPropValue<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      dts<span class="token operator">:</span> <span class="token string">'./auto-imports.d.ts'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h3 id="é…ç½®è‡ªåŠ¨å¼•å…¥vue3è¯­æ³•ç³–"><a href="#é…ç½®è‡ªåŠ¨å¼•å…¥vue3è¯­æ³•ç³–" class="header-anchor">#</a> é…ç½®è‡ªåŠ¨å¼•å…¥vue3è¯­æ³•ç³–</h3> <blockquote><p>å¾ˆå¤šäººå¯¹é¡¹ç›®ä¸­ä½¿ç”¨refï¼Œcomputedç­‰apiï¼Œç„¶åjsä¸­å¾—ä½¿ç”¨.valueçš„å½¢å¼å¾ˆä¸çˆ½ï¼Œvueå®˜æ–¹ç‰¹åœ°æä¾›äº†ç±»ä¼¼äº<a href="https://github.com/vuejs/rfcs/discussions/369" target="_blank" rel="noopener noreferrer">$ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ç­‰å†™æ³•çš„è¯­æ³•ç³–
é…ç½®<code>vite.config.ts</code>ï¼Œåœ¨é¡¹ç›®ä¸­ä¸éœ€è¦å¼•å…¥è‡ªåŠ¨ä½¿ç”¨</p></blockquote> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      reactivityTransform<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>
      imports<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span>
        <span class="token string">'vue/macros'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h3 id="ä½¿ç”¨-4"><a href="#ä½¿ç”¨-4" class="header-anchor">#</a> ä½¿ç”¨</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">$ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="é…ç½®-css-é¢„å¤„ç†å™¨-less"><a href="#é…ç½®-css-é¢„å¤„ç†å™¨-less" class="header-anchor">#</a> é…ç½® css é¢„å¤„ç†å™¨ less</h2> <blockquote><p>è™½ç„¶ <code>vite</code> åŸç”Ÿæ”¯æŒ <code>less/sass/scss/stylus</code>ï¼Œä½†æ˜¯ä½ å¿…é¡»æ‰‹åŠ¨å®‰è£…ä»–ä»¬çš„é¢„å¤„ç†å™¨ä¾èµ–</p></blockquote> <h3 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="header-anchor">#</a> å®‰è£…</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token function">less</span> -D
</code></pre></div><h3 id="é…ç½®å…¨å±€-less-æ ·å¼"><a href="#é…ç½®å…¨å±€-less-æ ·å¼" class="header-anchor">#</a> é…ç½®å…¨å±€ less æ ·å¼</h3> <p>åœ¨ <code>src/assets</code> ä¸‹æ–°å¢ <code>style</code> æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å®ç°æ¢è‚¤ï¼Œä¸»é¢˜é…ç½®ç­‰åŠŸèƒ½</p> <p>æ–°å»º <code>index.less</code>, è®¾ç½®ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¢œè‰²<code>å˜é‡</code> :</p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token variable">@theme-color<span class="token punctuation">:</span></span> dark<span class="token punctuation">;</span>
</code></pre></div><p>å¦‚ä½•å°†è¿™ä¸ªå…¨å±€æ ·å¼æ–‡ä»¶<code>å…¨å±€æ³¨å…¥</code>åˆ°é¡¹ç›®ä¸­å‘¢ï¼Ÿé…ç½® <code>Vite</code> å³å¯ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">css</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">less</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span><span class="token string">'@import &quot;@/assets/style/index.less&quot;;'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="ç»„ä»¶ä¸­ä½¿ç”¨"><a href="#ç»„ä»¶ä¸­ä½¿ç”¨" class="header-anchor">#</a> ç»„ä»¶ä¸­ä½¿ç”¨</h3> <blockquote><p>ä¸éœ€è¦ä»»ä½•å¼•å…¥å¯ä»¥ç›´æ¥ä½¿ç”¨å…¨å±€<code>less</code>å®šä¹‰çš„å˜é‡</p></blockquote> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.theme</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@theme-color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç¯å¢ƒå˜é‡é…ç½®"><a href="#ç¯å¢ƒå˜é‡é…ç½®" class="header-anchor">#</a> ç¯å¢ƒå˜é‡é…ç½®</h2> <blockquote><p><code>vite</code> æä¾›äº†ä¸¤ç§æ¨¡å¼ï¼šå…·æœ‰å¼€å‘æœåŠ¡å™¨çš„<code>å¼€å‘æ¨¡å¼</code>ï¼ˆdevelopmentï¼‰å’Œ<code>ç”Ÿäº§æ¨¡å¼</code>ï¼ˆproductionï¼‰ã€‚<code>vite serve</code>æ—¶æ¨¡å¼é»˜è®¤æ˜¯developmentï¼Œ<code>vite build</code>æ—¶æ˜¯productionã€‚</p></blockquote> <p>é¡¹ç›®æ ¹ç›®å½•æ–°å»º:<code>.env.development</code> :</p> <div class="language-env extra-class"><pre class="language-text"><code>NODE_ENV=development

VITE_APP_WEB_URL= 'YOUR WEB URL'
</code></pre></div><p>é¡¹ç›®æ ¹ç›®å½•æ–°å»º:<code>.env.production</code> :</p> <div class="language-env extra-class"><pre class="language-text"><code>NODE_ENV=production

VITE_APP_WEB_URL= 'YOUR WEB URL'
</code></pre></div><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_APP_WEB_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é…ç½® <code>package.json</code>:</p> <blockquote><p>æ‰“åŒ…åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;build:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-tsc --noEmit &amp;&amp; vite build --mode development&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;build:pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-tsc --noEmit &amp;&amp; vite build --mode production&quot;</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="ä»£ç è´¨é‡é£æ ¼ç»Ÿä¸€"><a href="#ä»£ç è´¨é‡é£æ ¼ç»Ÿä¸€" class="header-anchor">#</a> ä»£ç è´¨é‡é£æ ¼ç»Ÿä¸€</h2> <h3 id="é›†æˆ-eslint"><a href="#é›†æˆ-eslint" class="header-anchor">#</a> é›†æˆ eslint</h3> <blockquote><p><code>ESLint</code> ä¸»è¦è´Ÿè´£: è´¨é‡æ£€æŸ¥(ä¾‹å¦‚ä½¿ç”¨äº†æŸä¸ªå˜é‡å´å¿˜è®°äº†å®šä¹‰)ã€é£æ ¼æ£€æŸ¥</p></blockquote> <ol><li>å®‰è£…</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i eslint eslint-plugin-import eslint-plugin-vue eslint-config-airbnb-base -D
</code></pre></div><p>ç”±äº <code>ESLint</code> é»˜è®¤ä½¿ç”¨ <a href="https://github.com/eslint/espree" target="_blank" rel="noopener noreferrer">Espree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿›è¡Œè¯­æ³•è§£æï¼Œæ— æ³•è¯†åˆ« TypeScript çš„ä¸€äº›è¯­æ³•ï¼Œæ•…æˆ‘ä»¬éœ€è¦å®‰è£… <code>@typescript-eslint/parser</code> æ›¿ä»£æ‰é»˜è®¤çš„è§£æå™¨</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i @typescript-eslint/parser -D
</code></pre></div><p>å®‰è£…å¯¹åº”çš„æ’ä»¶ <a href="https://github.com/typescript-eslint/typescript-eslint/tree/main/packages/eslint-plugin" target="_blank" rel="noopener noreferrer">@typescript-eslint/eslint-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å®ƒä½œä¸º eslint é»˜è®¤è§„åˆ™çš„è¡¥å……ï¼Œæä¾›äº†ä¸€äº›é¢å¤–çš„é€‚ç”¨äº ts è¯­æ³•çš„è§„åˆ™ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i @typescript-eslint/eslint-plugin -D
</code></pre></div><ol start="2"><li>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š <code>.eslintrc.js</code> æˆ– <code>.eslintrc.json</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;vue-eslint-parser&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> latest<span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">'airbnb-base'</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// override/add rules settings here, such as:</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>åˆ›å»ºå¿½ç•¥æ–‡ä»¶ï¼š<code>.eslintignore</code></li></ol> <div class="language- extra-class"><pre class="language-text"><code>*.sh
node_modules
*.md
*.woff
*.ttf
.vscode
.idea
dist
/public
/docs
.husky
.local
/bin
Dockerfile
</code></pre></div><h3 id="é›†æˆ-prettier"><a href="#é›†æˆ-prettier" class="header-anchor">#</a> é›†æˆ prettier</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li><code>prettier</code>ä¸»è¦è´Ÿè´£: é£æ ¼æ£€æŸ¥, æ²¡æœ‰è´¨é‡æ£€æŸ¥ã€‚è™½ç„¶ eslint æœ¬èº«åªæä¾›äº†éƒ¨åˆ†é£æ ¼æ£€æŸ¥ï¼Œä½†æ˜¯è¿™å¯¼è‡´æœ‰éƒ¨åˆ†çš„ä»£ç ä¾ç„¶æ²¡æœ‰å®ç°é£æ ¼æ£€æŸ¥ï¼Œå…·ä½“ç»†èŠ‚ä¸‹é¢ä¼šè¯´ã€‚å¯¹äºå¤§å¤šæ•°å®é™…é¡¹ç›®ï¼Œéƒ½ä¼šä½¿ç”¨<code>prettier</code>è¿›è¡Œé£æ ¼æ£€æŸ¥ã€‚ç”±äºä¼šå‡ºç°å¼•å…¥å¤šä¸ªé£æ ¼æ£€æŸ¥çš„æ’ä»¶å’Œé…ç½® lintï¼Œè¿™å°±å¯¼è‡´å­˜åœ¨éƒ¨åˆ†ä¼šä¸ prettier çš„ lint å‡ºç°å†²çªï¼Œå› æ­¤éœ€è¦ lint é¢„è®¾åŒ…ã€‚</li> <li><code>eslint-config-prettier</code>ï¼Œè¿™ä¸ªåŒ…çš„ä½œç”¨æ˜¯å…ˆå…³é—­è¿™äº›ä¸ prettier å†²çªçš„ lint è§„åˆ™ï¼Œç„¶åä¹‹åå†å¯ç”¨ prettier çš„è§„åˆ™ï¼Œä½¿å¾—å†²çªçš„ lint è§„åˆ™ä»¥ prettier ä¸ºå‡†ã€‚</li> <li><code>eslint-plugin-prettier</code>æ’ä»¶ä¼šè°ƒç”¨<code>prettier</code>å¯¹ä½ çš„ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ï¼Œå…¶åŸç†æ˜¯å…ˆä½¿ç”¨ prettier å¯¹ä½ çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åä¸æ ¼å¼åŒ–ä¹‹å‰çš„ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè¿‡å‡ºç°äº†ä¸ä¸€è‡´ï¼Œè¿™ä¸ªåœ°æ–¹å°±ä¼šè¢« prettier è¿›è¡Œæ ‡è®°ã€‚</li></ol></div> <ol><li>å®‰è£…</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i prettier eslint-config-prettier eslint-plugin-prettier -D
</code></pre></div><ol start="2"><li>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š <code>prettier.config.js</code> æˆ– <code>.prettierrc.js</code> æˆ– <code>.prettierrc</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸€è¡Œæœ€å¤š 80 å­—ç¬¦</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token comment">// ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token comment">// ä¸ä½¿ç”¨ tab ç¼©è¿›ï¼Œè€Œä½¿ç”¨ç©ºæ ¼</span>
  <span class="token literal-property property">useTabs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// è¡Œå°¾éœ€è¦æœ‰åˆ†å·</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// ä½¿ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// å¯¹è±¡çš„ key ä»…åœ¨å¿…è¦æ—¶ç”¨å¼•å·</span>
  <span class="token literal-property property">quoteProps</span><span class="token operator">:</span> <span class="token string">&quot;as-needed&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// jsx ä¸ä½¿ç”¨å•å¼•å·ï¼Œè€Œä½¿ç”¨åŒå¼•å·</span>
  <span class="token literal-property property">jsxSingleQuote</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// æœ«å°¾ä½¿ç”¨é€—å·</span>
  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å¤§æ‹¬å·å†…çš„é¦–å°¾éœ€è¦ç©ºæ ¼ { foo: bar }</span>
  <span class="token literal-property property">bracketSpacing</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// jsx æ ‡ç­¾çš„åå°–æ‹¬å·éœ€è¦æ¢è¡Œ</span>
  <span class="token literal-property property">jsxBracketSameLine</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// ç®­å¤´å‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ‹¬å·</span>
  <span class="token literal-property property">arrowParens</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// æ¯ä¸ªæ–‡ä»¶æ ¼å¼åŒ–çš„èŒƒå›´æ˜¯æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹</span>
  <span class="token literal-property property">rangeStart</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rangeEnd</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token comment">// æ˜¯å¦éœ€è¦å†™æ–‡ä»¶å¼€å¤´çš„ @prettier</span>
  <span class="token literal-property property">requirePragma</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// æ˜¯å¦è‡ªåŠ¨åœ¨æ–‡ä»¶å¼€å¤´æ’å…¥ @prettier</span>
  <span class="token literal-property property">insertPragma</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// ä½¿ç”¨é»˜è®¤çš„æŠ˜è¡Œæ ‡å‡†</span>
  <span class="token literal-property property">proseWrap</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// æ ¹æ®æ˜¾ç¤ºæ ·å¼å†³å®š html è¦ä¸è¦æŠ˜è¡Œ</span>
  <span class="token literal-property property">htmlWhitespaceSensitivity</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// æ¢è¡Œç¬¦ä½¿ç”¨ lf</span>
  <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">&quot;lf&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>ä¿®æ”¹ <code>.eslintrc.js</code> é…ç½®</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'@typescript-eslint'</span><span class="token punctuation">,</span> <span class="token string">'prettier'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span>
        <span class="token string">'airbnb-base'</span><span class="token punctuation">,</span>
        <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span>
        <span class="token string">'prettier'</span><span class="token punctuation">,</span>
        <span class="token string">'plugin:prettier/recommended'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <p>æ›´å¤šé…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://prettier.io/docs/en/options.html#print-width" target="_blank" rel="noopener noreferrer">Prettier Options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
åœ¨è®¾ç½®ä¸­ï¼Œæœç´¢ <code>save</code> ï¼Œå‹¾é€‰ <code>Format On Save</code>ï¼š
<img src="/assets/img/save.afaab03c.png" alt="format on save">
ç„¶ååœ¨ setting.json ä¸­å¢åŠ é…ç½®ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;[javascript]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="é›†æˆ-stylelint"><a href="#é›†æˆ-stylelint" class="header-anchor">#</a> é›†æˆ stylelint</h3> <p>å¦‚ä½•ç¼–å†™ CSS ä»¥åŠå¦‚ä½•åœ¨æµè§ˆå™¨ä¸­åŠ è½½æ ·å¼è¡¨éƒ½ä¼šå¯¹åŠ è½½æ—¶é—´é€ æˆé‡å¤§å½±å“ã€‚css çš„ä¹¦å†™é¡ºåºå¾ˆé‡è¦ï¼Œä¼šå½±å“æµè§ˆå™¨çš„æ¸²æŸ“ã€‚æ­£ç¡®çš„ä¹¦å†™å¯ä»¥å‡å°‘æµè§ˆå™¨çš„å›æµï¼Œæå‡æµè§ˆå™¨çš„ dom æ¸²æŸ“ã€‚
stylelint è‡´åŠ›äºç±» css æ–‡ä»¶çš„é™æ€æ£€æŸ¥ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§„èŒƒåŒ– css çš„ä¹¦å†™ï¼Œé£æ ¼ç»Ÿä¸€ï¼Œé¿å…æ ·å¼æ–‡ä»¶çš„é”™è¯¯ã€‚</p> <ol><li>å®‰è£…<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>stylelint</code>14 ä»¥ä¸Šç‰ˆæœ¬ peerDependencies ä¾èµ–<code>postcss</code>8 ä»¥ä¸Šç‰ˆæœ¬ï¼Œç›´æ¥å¼•å…¥<code>postcss</code>ï¼Œå¯ä»¥ç»Ÿä¸€<code>postcss</code>ç‰ˆæœ¬ï¼Œé˜²æ­¢åç»­ postcss åŠ stylelint ç›¸å…³æ’ä»¶å¸¦æ¥çš„å…¶ä»–é—®é¢˜</p></div></li></ol> <ul><li>é¡¹ç›®ä¸­ä½¿ç”¨ less</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i -D postcss postcss-html postcss-less stylelint stylelint-config-html stylelint-order stylelint-config-rational-order stylelint-config-prettier
</code></pre></div><details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹æ’ä»¶ä»‹ç»</summary> <blockquote><ul><li><code>postcss-html</code> ç”¨äºè§£æ HTMLï¼ˆå’Œç±»ä¼¼ HTMLï¼‰çš„ PostCSS è¯­æ³•ï¼Œæ¯”å¦‚ htmlï¼Œxmlï¼Œvueï¼Œsvelteï¼Œphp</li> <li><code>postcss-less</code> ç”¨äºè§£æ less çš„ PostCSS è¯­æ³•</li> <li><code>stylelint-config-html</code> æ­¤é…ç½®æ†ç»‘ postcss-html è‡ªå®šä¹‰è¯­æ³•å¹¶å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œå¦‚æœæ‚¨åœ¨ Stylelint é…ç½®ä¸­ä½¿ç”¨æ­¤é…ç½®ï¼ŒHTMLã€XMLã€Vueã€Svelte å’Œ PHP æ–‡ä»¶å°†æ˜¯å¯è§£æçš„</li> <li><code>stylelint-order</code> stylelint æ’ä»¶ï¼Œæä¾›ä¸ css æ’åºç›¸å…³çš„å‚æ•°ï¼Œä»¥åŠä½œç”¨ç›¸å…³è§„åˆ™åˆ° stylelint</li> <li><code>stylelint-config-rational-order</code> æä¾› css å±æ€§çš„æ’åºè§„åˆ™</li> <li><code>stylelint-config-prettier</code> å…³é—­æ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸ Prettier å†²çªçš„ CSS è§„åˆ™</li></ul></blockquote></details> <ul><li>é¡¹ç›®ä¸­ä½¿ç”¨ scss</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i -D postcss stylelint stylelint-config-recommended-scss stylelint-config-recommended-vue stylelint-config-standard-scss stylelint-order stylelint-config-rational-order stylelint-config-prettier-scss
</code></pre></div><details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹æ’ä»¶ä»‹ç»</summary> <blockquote><ul><li><code>stylelint-config-recommended-scss</code> æ¨èçš„ scss å…±äº«é…ç½®</li> <li><code>stylelint-config-recommended-vue</code> æ¨èçš„ vue å…±äº«é…ç½®</li> <li><code>stylelint-config-recommended-scss</code>è§„åˆ™ï¼‰</li> <li><code>stylelint-order</code> stylelint æ’ä»¶ï¼Œæä¾›ä¸ css æ’åºç›¸å…³çš„å‚æ•°ï¼Œä»¥åŠä½œç”¨ç›¸å…³è§„åˆ™åˆ° stylelint</li> <li><code>stylelint-config-rational-order</code> æä¾› css å±æ€§çš„æ’åºè§„åˆ™</li> <li><code>stylelint-config-prettier-scss</code> å…³é—­æ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸ Prettier å†²çªçš„ CSS å’Œ SCSS è§„åˆ™</li></ul></blockquote></details> <ol start="2"><li>æ ¹ç›®å½•ä¸‹æ–°å¢é…ç½®æ–‡ä»¶ <code>.stylelintrc.js</code> æˆ– <code>stylelint.config.js</code></li></ol> <ul><li>é¡¹ç›®ä¸­ä½¿ç”¨ less</li></ul> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;stylelint-order&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;stylelint-config-html/vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-rational-order&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-prettier&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">customSyntax</span><span class="token operator">:</span> <span class="token string">&quot;postcss-html&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;string-quotes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;single&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å•å¼•å·</span>
    <span class="token string-property property">&quot;at-rule-no-unknown&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;selector-class-pattern&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;unit-allowed-list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vw&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ignoreFiles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ç‰¹æ®Šæ–‡ä»¶çš„é…ç½®</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.(less|css)&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customSyntax</span><span class="token operator">:</span> <span class="token string">&quot;postcss-less&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ul><li>é¡¹ç›®ä¸­ä½¿ç”¨ scss</li></ul> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;stylelint-order&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;stylelint-config-standard-scss&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-recommended-vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-recommended-vue/scss&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-rational-order&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;stylelint-config-prettier-scss&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>å¢åŠ  <code>stylelint</code> çš„å¿½ç•¥æ–‡ä»¶ <code>.stylelintignore</code></li></ol> <div class="language- extra-class"><pre class="language-text"><code>src/**/*.js
src/**/*.ts
dist
node_modules
index.html
*.md
</code></pre></div><ol start="4"><li>é…ç½®<code>VSCode</code>æ ¼å¼åŒ–</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Save</code>æ—¶æ ¼å¼åŒ–ï¼šä¸‹é¢çš„ json å‹è®¾ç½®éœ€è¦å†™åˆ°.vscode æ–‡ä»¶å¤¹çš„<code>setting.json</code>é‡Œ</p></div> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ä¿å­˜æ—¶ä½¿ç”¨VSCode è‡ªèº«æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–ï¼Œè§¦å‘è‡ªåŠ¨ä¿å­˜æœºåˆ¶ã€‚</span>
  <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;source.fixAll.stylelint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// å¼€å¯stylelintæ ¡éªŒ</span>
  <span class="token property">&quot;stylelint.enable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// å¼€å¯ä¹‹åæ ¼å¼åŒ–vueæ–‡ä»¶æ—¶terminalä¼šä¸æ–­æŠ¥é”™</span>
  <span class="token comment">// &quot;stylelint.validate&quot;: [&quot;css&quot;, &quot;less&quot;, &quot;vue&quot;],</span>
  <span class="token comment">// è‡ªåŠ¨ä¿å­˜è§¦å‘stylelint(stylelint-plusæ’ä»¶å‘½ä»¤)</span>
  <span class="token property">&quot;stylelint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[vue]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// é»˜è®¤æ ¼å¼åŒ–èµ°prettier</span>
  <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å„ç§æ–‡ä»¶æ ¼å¼åŒ–è§„åˆ™</span>
  <span class="token property">&quot;[javascriptreact]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[typescript]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[typescriptreact]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[html]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[css]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[less]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[scss]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[jsonc]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;[json]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ä¸¤è€…å¦‚æœåœ¨æ ¼å¼åŒ–jsæ—¶å†²çªï¼Œéœ€è¦å…³é—­é»˜è®¤jsæ ¼å¼åŒ–ç¨‹åº</span>
  <span class="token comment">// &quot;javascript.format.enable&quot;: false</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h3 id="é›†æˆ-husky-lint-staged"><a href="#é›†æˆ-husky-lint-staged" class="header-anchor">#</a> é›†æˆ husky + lint-staged</h3> <ol><li>å®‰è£… husky</li></ol> <p><code>husky</code> æ˜¯ä¸€ä¸ªä¸º git å®¢æˆ·ç«¯å¢åŠ  <code>hook</code> çš„å·¥å…·ã€‚å®‰è£…åï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨ä»“åº“ä¸­çš„ <code>.git/</code> ç›®å½•ä¸‹å¢åŠ ç›¸åº”çš„é’©å­ï¼›æ¯”å¦‚ <code>pre-commit</code> é’©å­å°±ä¼šåœ¨ä½ æ‰§è¡Œ <code>git commit</code> çš„è§¦å‘ã€‚</p> <p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ <code>pre-commit</code> ä¸­å®ç°ä¸€äº›æ¯”å¦‚ <code>lint æ£€æŸ¥</code>ã€<code>å•å…ƒæµ‹è¯•</code>ã€<code>ä»£ç ç¾åŒ–</code>ç­‰æ“ä½œã€‚å½“ç„¶ï¼Œ<code>pre-commit</code> é˜¶æ®µæ‰§è¡Œçš„å‘½ä»¤å½“ç„¶è¦ä¿è¯å…¶é€Ÿåº¦ä¸è¦å¤ªæ…¢ï¼Œæ¯æ¬¡ commit éƒ½ç­‰å¾ˆä¹…ä¹Ÿä¸æ˜¯ä»€ä¹ˆå¥½çš„ä½“éªŒã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>è¿™è¡Œå‘½ä»¤åšäº†å››ä»¶äº‹ï¼š</p> <ul><li>å®‰è£… husky åˆ°å¼€å‘ä¾èµ–</li> <li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .husky ç›®å½•</li> <li>åœ¨ .husky ç›®å½•åˆ›å»º pre-commit hookï¼Œå¹¶åˆå§‹åŒ– pre-commit å‘½ä»¤ä¸º npm test</li> <li>ä¿®æ”¹ package.json çš„ scriptsï¼Œå¢åŠ  &quot;prepare&quot;: &quot;husky install&quot;</li></ul> <p>å®‰è£…æˆåŠŸåä¼šå‘ç°é¡¹ç›®ä¸­å¤šäº†ä¸€ä¸ª<code>.husky</code>æ–‡ä»¶å¤¹:
<img src="/assets/img/husky.0551ac8e.png" alt="husky"></p> <p>åˆ°è¿™é‡Œï¼Œhusky é…ç½®å®Œæ¯•ï¼Œç°åœ¨æˆ‘ä»¬æ¥ä½¿ç”¨å®ƒï¼š</p> <p>husky åŒ…å«å¾ˆå¤š <code>hook</code>ï¼ˆé’©å­ï¼‰ï¼Œå¸¸ç”¨æœ‰ï¼š<code>pre-commit</code>ã€<code>commit-msg</code>ã€<code>pre-push</code>ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ pre-commit æ¥è§¦å‘ ESLint å‘½ä»¤ã€‚</p> <p>ä¿®æ”¹ .husky/pre-commit hook æ–‡ä»¶çš„è§¦å‘å‘½ä»¤ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code>eslint --fix ./src --ext .vue,.js,.ts
</code></pre></div><p>ä¸Šé¢è¿™ä¸ª <code>pre-commit</code> hook æ–‡ä»¶çš„ä½œç”¨æ˜¯ï¼š</p> <p>å½“æˆ‘ä»¬æ‰§è¡Œ <code>git commit -m &quot;xxx&quot;</code> æ—¶ï¼Œä¼šå…ˆå¯¹ src ç›®å½•ä¸‹æ‰€æœ‰çš„ .vueã€.jsã€.ts  æ–‡ä»¶æ‰§è¡Œ eslint --fix å‘½ä»¤ï¼Œå¦‚æœ ESLint é€šè¿‡ï¼ŒæˆåŠŸ commitï¼Œå¦åˆ™ç»ˆæ­¢ commitã€‚</p> <p>ä½†æ˜¯åˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæœ‰æ—¶å€™æˆ‘ä»¬æ˜æ˜åªæ”¹åŠ¨äº†ä¸€ä¸¤ä¸ªæ–‡ä»¶ï¼Œå´è¦å¯¹æ‰€æœ‰çš„æ–‡ä»¶æ‰§è¡Œ eslint --fixã€‚</p> <p>å‡å¦‚è¿™æ˜¯ä¸€ä¸ªå†å²é¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨ä¸­é€”é…ç½®äº†<code>ESLint</code>è§„åˆ™ï¼Œé‚£ä¹ˆåœ¨æäº¤ä»£ç æ—¶ï¼Œä¹Ÿä¼šå¯¹å…¶ä»–æœªä¿®æ”¹çš„â€œå†å²â€æ–‡ä»¶éƒ½è¿›è¡Œæ£€æŸ¥ï¼Œå¯èƒ½ä¼šé€ æˆå¤§é‡æ–‡ä»¶å‡ºç° <code>ESLint</code>é”™è¯¯ï¼Œæ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚
æˆ‘ä»¬è¦åšåˆ°åªç”¨<code>ESLint</code>ä¿®å¤è‡ªå·±æ­¤æ¬¡å†™çš„ä»£ç ï¼Œè€Œä¸å»å½±å“å…¶ä»–çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€å€ŸåŠ©ä¸€ä¸ªç¥å¥‡çš„å·¥å…·<code>lint-staged</code>ã€‚</p> <ol start="2"><li>é…ç½®lint-staged</li></ol> <p><code>lint-staged</code> è¿™ä¸ªå·¥å…·ä¸€èˆ¬ç»“åˆ husky æ¥ä½¿ç”¨ï¼Œå®ƒå¯ä»¥è®© husky çš„ hook è§¦å‘çš„å‘½ä»¤åªä½œç”¨äº git addé‚£äº›æ–‡ä»¶ï¼ˆå³ git æš‚å­˜åŒºçš„æ–‡ä»¶ï¼‰ï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–æ–‡ä»¶ã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ lint-staged ç»§ç»­ä¼˜åŒ–é¡¹ç›®ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">pnpm</span> i lint-staged -D
</code></pre></div><p>åœ¨ <code>package.json</code> é‡Œå¢åŠ  lint-staged é…ç½®é¡¹</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,ts,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint --cache --fix&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token property">&quot;*.{vue,less}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;stylelint --fix  --custom-syntax postcss-less&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™è¡Œå‘½ä»¤è¡¨ç¤ºï¼šåªå¯¹ <code>git æš‚å­˜åŒº</code>çš„ <code>.vueã€.jsã€.ts</code> æ–‡ä»¶æ‰§è¡Œ <code>eslint --fix</code>ã€‚</p> <ol start="3"><li>ä¿®æ”¹ <code>.husky/pre-commit</code> hook çš„è§¦å‘å‘½ä»¤ä¸ºï¼š<code>npx lint-staged</code> <img src="/assets/img/husky.0551ac8e.png" alt="husky">
è‡³æ­¤ï¼Œ<code>husky</code> å’Œ <code>lint-staged</code> ç»„åˆé…ç½®å®Œæˆã€‚</li></ol> <p>ç°åœ¨æˆ‘ä»¬æäº¤ä»£ç æ—¶å°±ä¼šå˜æˆè¿™æ ·ï¼š</p> <p>å‡å¦‚æˆ‘ä»¬ä¿®æ”¹äº† src ç›®å½•ä¸‹çš„ <code>user.vue</code> ä»¥åŠ æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.ts</code> æ–‡ä»¶ï¼Œç„¶å git add ./src/ï¼Œæœ€å git commit -m &quot;test...&quot;ï¼Œè¿™æ—¶å€™å°±ä¼šåªå¯¹ <code>user.vue</code> è¿™ä¸¤ä¸ªæ–‡ä»¶æ‰§è¡Œ <code>eslint --fix</code> å’Œ <code>stylelint --fix</code>ã€‚å¦‚æœ ESLint å’Œ stylelinté€šè¿‡ï¼ŒæˆåŠŸæäº¤ï¼Œå¦åˆ™ç»ˆæ­¢æäº¤ã€‚ä»è€Œä¿è¯äº†æˆ‘ä»¬æäº¤åˆ° Git ä»“åº“çš„ä»£ç éƒ½æ˜¯è§„èŒƒçš„ã€‚</p> <h2 id="ä»£ç æäº¤è§„èŒƒç»Ÿä¸€"><a href="#ä»£ç æäº¤è§„èŒƒç»Ÿä¸€" class="header-anchor">#</a> ä»£ç æäº¤è§„èŒƒç»Ÿä¸€</h2> <blockquote><p>ä¸ºäº†ä½¿å›¢é˜Ÿå¤šäººåä½œæ›´åŠ çš„è§„èŒƒï¼Œæ‰€ä»¥éœ€è¦æ¯æ¬¡åœ¨ git æäº¤çš„æ—¶å€™ï¼Œåšä¸€æ¬¡ç¡¬æ€§è§„èŒƒæäº¤ï¼Œè§„èŒƒ git çš„æäº¤ä¿¡æ¯ã€‚</p></blockquote> <p>å¦‚æœ git commit çš„æè¿°ä¿¡æ¯ç²¾å‡†ï¼Œåœ¨åæœŸç»´æŠ¤å’Œ Bug å¤„ç†æ—¶ä¼šå˜å¾—æœ‰æ®å¯æŸ¥ï¼Œé¡¹ç›®å¼€å‘å‘¨æœŸå†…è¿˜å¯ä»¥æ ¹æ®è§„èŒƒçš„æäº¤ä¿¡æ¯å¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—ï¼Œä»è€Œæ–¹ä¾¿æˆ‘ä»¬è¿½è¸ªé¡¹ç›®å’ŒæŠŠæ§è¿›åº¦ã€‚</p> <p>è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç¤¾åŒºæœ€æµè¡Œã€æœ€çŸ¥åã€æœ€å—è®¤å¯çš„ <a href="https://github.com/angular/angular/commits/master" target="_blank" rel="noopener noreferrer">Angular å›¢é˜Ÿæäº¤è§„èŒƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h3 id="é›†æˆ-commitizen-å®ç°æäº¤è§„èŒƒ"><a href="#é›†æˆ-commitizen-å®ç°æäº¤è§„èŒƒ" class="header-anchor">#</a> é›†æˆ <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å®ç°æäº¤è§„èŒƒ</h3> <ol><li>å®‰è£…</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i -D commitizen cz-customizable
</code></pre></div><ol start="2"><li>é…ç½®<code>package.json</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit&quot;</span><span class="token operator">:</span><span class="token string">&quot;cz&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre></div></details> <ol start="3"><li>è‡ªå®šä¹‰æç¤ºåˆ™æ·»åŠ  <code>.cz-config.js</code></li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¯é€‰ç±»å‹</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'feat:     æ–°åŠŸèƒ½'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'fix:      ä¿®å¤'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'docs:     æ–‡æ¡£å˜æ›´'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'style:    ä»£ç é£æ ¼ç›¸å…³(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'refactor: é‡æ„(æ—¢ä¸æ˜¯å¢åŠ featureï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'perf:     æ€§èƒ½ä¼˜åŒ–'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test:     æµ‹è¯•ç›¸å…³'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'chore:    ä¾èµ–æ›´æ–°/è„šæ‰‹æ¶é…ç½®ä¿®æ”¹ç­‰'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'revert:   æ’¤é”€ä¿®æ”¹'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'workflow'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'workflow:    å·¥ä½œæµæ”¹è¿›'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'ci'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ci:    æŒç»­é›†æˆ'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'types'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'types:    ç±»å‹å®šä¹‰æ–‡ä»¶æ›´æ”¹'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'wip'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'wip:    å¼€å‘ä¸­'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// æ¶ˆæ¯æ­¥éª¤</span>
  <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'è¯·é€‰æ‹©æäº¤ç±»å‹:'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">'è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">'è¯·è¾“å…¥è¦å…³é—­çš„issue(å¯é€‰):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span> <span class="token string">'ç¡®è®¤ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n/e/h)'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// è·³è¿‡é—®é¢˜</span>
  <span class="token literal-property property">skipQuestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'footer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// subjectæ–‡å­—é•¿åº¦é»˜è®¤æ˜¯72</span>
  <span class="token literal-property property">subjectLimit</span><span class="token operator">:</span> <span class="token number">72</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="4"><li>äº¤äº’ç•Œé¢æµ‹è¯•</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡</summary> <p><img src="/assets/img/cz.f1e46ba6.png" alt="commitizen"></p></details> <h3 id="é›†æˆ-commitlint-éªŒè¯æäº¤è§„èŒƒ"><a href="#é›†æˆ-commitlint-éªŒè¯æäº¤è§„èŒƒ" class="header-anchor">#</a> é›†æˆ commitlint éªŒè¯æäº¤è§„èŒƒ</h3> <p>åœ¨â€œä»£ç è§„èŒƒâ€ç« èŠ‚ï¼Œæˆ‘ä»¬å·²ç»è®²åˆ°è¿‡ï¼Œå°½ç®¡åˆ¶å®šäº†è§„èŒƒï¼Œä½†åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œæ€»æœ‰äº›äººä¾æ—§æˆ‘è¡Œæˆ‘ç´ ï¼Œå› æ­¤æäº¤ä»£ç è¿™ä¸ªç¯èŠ‚ï¼Œæˆ‘ä»¬ä¹Ÿå¢åŠ ä¸€ä¸ªé™åˆ¶ï¼šåªè®©ç¬¦åˆè§„èŒƒçš„ commit message é€šè¿‡ï¼Œæˆ‘ä»¬å€ŸåŠ© <code>@commitlint/config-conventional</code> å’Œ <code>@commitlint/cli</code> æ¥å®ç°ã€‚</p> <ol><li>å®‰è£…</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i @commitlint/config-conventional @commitlint/cli -D
</code></pre></div><ol start="2"><li>æ–°å¢é…ç½® <code>commitlint.config.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> 
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>ä½¿ç”¨ husky çš„ <code>commit-msg</code> hook è§¦å‘éªŒè¯æäº¤ä¿¡æ¯çš„å‘½ä»¤</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&quot;npx --no-install commitlint --edit <span class="token variable">$1</span>&quot;</span>
</code></pre></div><p>ä½¿ç”¨ husky å‘½ä»¤åœ¨ <code>.husky</code> ç›®å½•ä¸‹åˆ›å»º <code>commit-msg</code> æ–‡ä»¶ï¼Œå¹¶åœ¨æ­¤æ‰§è¡Œ <code>commit message</code> çš„éªŒè¯å‘½ä»¤ã€‚
<img src="/assets/img/commitlint.d000feec.png" alt="commitlint">
4. <code>commitlint</code> éªŒè¯</p> <ul><li>ä¸ç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯
å¦‚ä¸‹å›¾ï¼Œæäº¤ä¿¡æ¯ <code>test commitlint</code> ä¸ç¬¦åˆè§„èŒƒï¼Œæäº¤å¤±è´¥ã€‚
<img src="/assets/img/test_commitlint.63c34a4b.png" alt="test commitlint"></li> <li>ç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯
æäº¤ä¿¡æ¯ <code>chore: commitlint test</code> ç¬¦åˆè§„èŒƒï¼ŒæˆåŠŸæäº¤åˆ°ä»“åº“ã€‚</li></ul> <h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="header-anchor">#</a> å•å…ƒæµ‹è¯•</h2> <blockquote><p>å•å…ƒæµ‹è¯•å…è®¸ä½ å°†ç‹¬ç«‹å•å…ƒçš„ä»£ç è¿›è¡Œéš”ç¦»æµ‹è¯•ï¼Œå®Œæ•´çš„æµ‹è¯•èƒ½ä¸ºä»£ç å’Œä¸šåŠ¡æä¾›è´¨é‡ä¿è¯ï¼Œå‡å°‘ Bug çš„å‡ºç°ã€‚é€šè¿‡ç¼–å†™ç»†è‡´ä¸”æœ‰æ„ä¹‰çš„æµ‹è¯•ï¼Œä½ èƒ½å¤Ÿæœ‰ä¿¡å¿ƒåœ¨æ„å»ºæ–°ç‰¹æ€§æˆ–é‡æ„å·²æœ‰ä»£ç çš„åŒæ—¶ï¼Œä¿æŒåº”ç”¨çš„åŠŸèƒ½å’Œç¨³å®šã€‚</p></blockquote> <ol><li>å®‰è£…ä¾èµ–</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i @vue/test-utils jest @vue/vue3-jest ts-jest @types/jest -D
</code></pre></div><p>ç”±äº<code>@vue/vue3-jest</code>å’Œ<code>ts-jest</code> peerDependancies ä¾èµ– <code>@babel/core</code> å’Œ <code>babel-jest</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> i @babel/core babel-jest -D
</code></pre></div><ol start="2"><li>é…ç½®<code>jest.config.js</code>æ–‡ä»¶</li></ol> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">moduleFileExtensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'ts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">preset</span><span class="token operator">:</span> <span class="token string">'ts-jest'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">testEnvironment</span><span class="token operator">:</span> <span class="token string">'jsdom'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'^.+\\.vue$'</span><span class="token operator">:</span> <span class="token string">'vue-jest'</span><span class="token punctuation">,</span> <span class="token comment">// vue æ–‡ä»¶ç”¨ vue-jest è½¬æ¢</span>
    <span class="token string-property property">'^.+\\.ts$'</span><span class="token operator">:</span> <span class="token string">'ts-jest'</span> <span class="token comment">// ts æ–‡ä»¶ç”¨ ts-jest è½¬æ¢</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// support the same @ -&gt; src alias mapping in source code</span>
  <span class="token literal-property property">moduleNameMapper</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'^@/(.*)$'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir&gt;/src/$1'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'^~/(.*)$'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir&gt;/$1'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'^(\\.{1,2}/.*)\\.js$'</span><span class="token operator">:</span> <span class="token string">'$1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// åŒ¹é… __tests__ ç›®å½•ä¸‹çš„ .js/.ts æ–‡ä»¶ æˆ–å…¶ä»–ç›®å½•ä¸‹çš„ xx.test.js/ts xx.spec.js/ts</span>
  <span class="token literal-property property">testRegex</span><span class="token operator">:</span> <span class="token string">'(/__tests__/.*|(\\.|/)(test|spec))\\.(ts)$'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></details> <ol start="3"><li>æ‰§è¡Œå•å…ƒæµ‹è¯•</li></ol> <p>åœ¨æ ¹ç›®å½•ä¸‹ <code>package.json</code> æ–‡ä»¶çš„ scripts ä¸­ï¼Œæ·»åŠ ä¸€æ¡å•å…ƒæµ‹è¯•å‘½ä»¤ï¼š &quot;test:unit&quot;: &quot;jest&quot;ã€‚
æ‰§è¡Œå‘½ä»¤ <code>npm run test:unit</code> å³å¯è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œjest ä¼šæ ¹æ® <code>jest.config.js</code> é…ç½®æ–‡ä»¶å»æŸ¥æ‰¾ <strong>tests</strong> ç›®å½•ä¸‹çš„ .ts æ–‡ä»¶æˆ–å…¶ä»–ä»»æ„ç›®å½•ä¸‹çš„ .spec.ts å’Œ .test.ts æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œå•å…ƒæµ‹è¯•æ–¹æ³•ã€‚</p> <blockquote><p>ä½ å¯ä»¥åœ¨ <code>jest.config.js</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œè‡ªç”±é…ç½®å•å…ƒæµ‹è¯•æ–‡ä»¶çš„ç›®å½•ã€‚</p></blockquote> <ul><li>å•å…ƒæµ‹è¯•å…¨éƒ¨é€šè¿‡æ—¶çš„ç»ˆç«¯æ˜¾ç¤ºä¿¡æ¯
<img src="/assets/img/jest.92dd7e35.png" alt="jest"></li> <li>å•å…ƒæµ‹è¯•æœªå…¨éƒ¨é€šè¿‡æ—¶çš„ç»ˆç«¯æ˜¾ç¤ºä¿¡æ¯
<img src="/assets/img/jest_fail.8444e923.png" alt="jest_fail">
å½“å•å…ƒæµ‹è¯•æ²¡æœ‰å…¨éƒ¨é€šè¿‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯å»ä¼˜åŒ–å¯¹åº”ç»„ä»¶çš„ä»£ç ï¼Œè¿›ä¸€æ­¥æé«˜é¡¹ç›®å¥å£®æ€§ã€‚ä½†æ˜¯å†™å•å…ƒæµ‹è¯•æ˜¯ä»¶æ¯”è¾ƒç—›è‹¦çš„äº‹ï¼Œæˆ‘ä¸ªäººè§‰å¾—ä¹Ÿæ²¡å¿…è¦å…¨éƒ¨ç»„ä»¶éƒ½å†™å•å…ƒæµ‹è¯•ï¼Œæ ¹æ®é¡¹ç›®å®é™…æƒ…å†µæœ‰é’ˆå¯¹æ€§å»å†™å°±è¡Œäº†ã€‚</li></ul> <ol start="4"><li>å•å…ƒæµ‹è¯•çº¦æŸ</li></ol> <p>å‰é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>husky</code> åœ¨ Git çš„ <code>pre-commit</code> å’Œ <code>commit-msg</code> é˜¶æ®µåˆ†åˆ«çº¦æŸä»£ç é£æ ¼è§„èŒƒå’Œæäº¤ä¿¡æ¯è§„èŒƒã€‚è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨ <code>pre-push</code> é˜¶æ®µè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œåªæœ‰å•å…ƒæµ‹è¯•å…¨éƒ¨é€šè¿‡æ‰è®©ä»£ç  push åˆ°è¿œç«¯ä»“åº“ï¼Œå¦åˆ™ç»ˆæ­¢ pushã€‚</p> <p>ä½¿ç”¨ husky å‘½ä»¤åœ¨ <code>.husky</code> ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»º <code>pre-push</code> hook æ–‡ä»¶ï¼Œå¹¶åœ¨æ­¤æ‰§è¡Œå•å…ƒæµ‹è¯•å‘½ä»¤ <code>npm run test:unit</code>ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>npx husky <span class="token function">add</span> .husky/pre-push <span class="token string">&quot;npm run test:unit <span class="token variable">$1</span>&quot;</span>
</code></pre></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ git push æ—¶å°±èƒ½å…ˆè¿›è¡Œå•å…ƒæµ‹è¯•äº†ï¼Œåªæœ‰å•å…ƒæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œæ‰èƒ½æˆåŠŸ pushã€‚</p> <h2 id="vite-å¸¸ç”¨åŸºç¡€é…ç½®"><a href="#vite-å¸¸ç”¨åŸºç¡€é…ç½®" class="header-anchor">#</a> Vite å¸¸ç”¨åŸºç¡€é…ç½®</h2> <h3 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="header-anchor">#</a> åŸºç¡€é…ç½®</h3> <h4 id="è¿è¡Œ-ä»£ç†-å’Œ-æ‰“åŒ…-é…ç½®"><a href="#è¿è¡Œ-ä»£ç†-å’Œ-æ‰“åŒ…-é…ç½®" class="header-anchor">#</a> <code>è¿è¡Œ</code> <code>ä»£ç†</code> å’Œ <code>æ‰“åŒ…</code> é…ç½®</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="ç”Ÿäº§ç¯å¢ƒå»é™¤-console-debugger"><a href="#ç”Ÿäº§ç¯å¢ƒå»é™¤-console-debugger" class="header-anchor">#</a> ç”Ÿäº§ç¯å¢ƒå»é™¤ <code>console</code> <code>debugger</code></h4> <p>å¦‚æœä½ é¡¹ç›®è¿è¡Œ<code>pnpm dev</code>çš„æ—¶å€™ï¼Œå‡ºç°äº†<code>Note Vite now defaults to use esbuild for minification. If you still prefer Terser, set build.minify to &quot;terser</code>çš„æç¤ºï¼Œè¯´æ˜ä½ å½“å‰viteç‰ˆæœ¬(2.6.xç‰ˆæœ¬åŠä¹‹å‰)é»˜è®¤çš„å‹ç¼©æ··æ·†å·¥å…·ä¸º<a href="https://github.com/evanw/esbuild" target="_blank" rel="noopener noreferrer">esbuild<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å°†<code>minify</code>å‚æ•°ç½®ä¸º<code>terser</code>ã€‚</p> <h5 id="å®‰è£…ä¾èµ–-2"><a href="#å®‰è£…ä¾èµ–-2" class="header-anchor">#</a> å®‰è£…ä¾èµ–</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">pnpm</span> <span class="token function">add</span> rollup-plugin-terser
</code></pre></div><h5 id="æ–‡ä»¶é…ç½®"><a href="#æ–‡ä»¶é…ç½®" class="header-anchor">#</a> æ–‡ä»¶é…ç½®</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">build</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token string">'terser'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>psï¼šç»è¿‡æµ‹è¯•ï¼Œ<code>minify</code>å‚æ•°ä¸º<code>esbuild</code>çš„æ—¶å€™ï¼Œæ‰“åŒ…è¿‡ç¨‹ä¸­ä¼šæŠŠ<code>try...catch()</code>ä»£ç ä¸­<code>catch</code>åé¢çš„<code>()</code>ç»™å»æ‰ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ä¼ ç»Ÿæµè§ˆå™¨<code>(script type=&quot;nomodule&quot;)</code>ç™½å±ã€‚</p> <h3 id="ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ-gz-æ–‡ä»¶"><a href="#ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ-gz-æ–‡ä»¶" class="header-anchor">#</a> ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ .gz æ–‡ä»¶</h3> <blockquote><p>å¼€å¯ <code>gzip</code> å¯ä»¥æå¤§çš„å‹ç¼©é™æ€èµ„æºï¼Œå¯¹é¡µé¢åŠ è½½çš„é€Ÿåº¦èµ·åˆ°äº†æ˜¾è‘—çš„ä½œç”¨ã€‚</p></blockquote> <p>ä½¿ç”¨ <code>vite-plugin-compression</code> å¯ä»¥ <code>gzip</code> æˆ– <code>brotli</code> çš„æ–¹å¼æ¥å‹ç¼©èµ„æºï¼Œè¿™ä¸€æ­¥éœ€è¦æœåŠ¡å™¨ç«¯çš„é…åˆï¼Œ<code>vite</code> åªèƒ½å¸®ä½ æ‰“åŒ…å‡º <code>.gz</code> æ–‡ä»¶ã€‚æ­¤æ’ä»¶ä½¿ç”¨ç®€å•ï¼Œä½ ç”šè‡³æ— éœ€é…ç½®å‚æ•°ï¼Œå¼•å…¥å³å¯ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£…</span>
<span class="token function">yarn</span> <span class="token function">add</span> --dev vite-plugin-compression
</code></pre></div><p>plugins ä¸­æ·»åŠ ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> viteCompression <span class="token keyword">from</span> <span class="token string">'vite-plugin-compression'</span>

<span class="token comment">// gzipå‹ç¼© ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ .gz æ–‡ä»¶</span>
<span class="token function">viteCompression</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">verbose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">'gzip'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ext</span><span class="token operator">:</span> <span class="token string">'.gz'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="æœ€ç»ˆ-vite-config-ts"><a href="#æœ€ç»ˆ-vite-config-ts" class="header-anchor">#</a> æœ€ç»ˆ vite.config.ts</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//@ts-ignore</span>
<span class="token keyword">import</span> viteCompression <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-compression&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">//æ‰“åŒ…è·¯å¾„</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// gzipå‹ç¼© ç”Ÿäº§ç¯å¢ƒç”Ÿæˆ .gz æ–‡ä»¶</span>
    <span class="token function">viteCompression</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">verbose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">&quot;gzip&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ext</span><span class="token operator">:</span> <span class="token string">&quot;.gz&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// é…ç½®åˆ«å</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">'@import &quot;@/assets/style/index.less&quot;;'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//å¯åŠ¨æœåŠ¡é…ç½®</span>
  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…é…ç½®</span>
  <span class="token comment">//å»é™¤ console debugger</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å¸¸ç”¨æ’ä»¶"><a href="#å¸¸ç”¨æ’ä»¶" class="header-anchor">#</a> å¸¸ç”¨æ’ä»¶</h2> <blockquote><p>å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://vitejs.cn/plugins/</p></blockquote> <ul><li><code>@vitejs/plugin-vue</code> æä¾› <code>Vue 3</code> å•æ–‡ä»¶ç»„ä»¶æ”¯æŒ</li> <li><code>@vitejs/plugin-vue-jsx</code> æä¾› Vue 3 <code>JSX</code> æ”¯æŒï¼ˆé€šè¿‡ ä¸“ç”¨çš„ Babel è½¬æ¢æ’ä»¶ï¼‰</li> <li><code>@vitejs/plugin-legacy</code> ä¸ºæ‰“åŒ…åçš„æ–‡ä»¶æä¾›ä¼ ç»Ÿæµè§ˆå™¨<code>å…¼å®¹æ€§</code>æ”¯æŒ</li> <li><code>unplugin-vue-components</code> ç»„ä»¶çš„æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥</li> <li><code>vite-plugin-compression</code> ä½¿ç”¨ gzip æˆ–è€… brotli æ¥å‹ç¼©èµ„æº</li> <li>.....</li></ul> <h2 id="éå¸¸æ¨èä½¿ç”¨çš„-hooks-åº“"><a href="#éå¸¸æ¨èä½¿ç”¨çš„-hooks-åº“" class="header-anchor">#</a> éå¸¸æ¨èä½¿ç”¨çš„ hooks åº“</h2> <blockquote><p>å› ä¸º<code>vue3.x</code>å’Œ<code>react hooks</code>çœŸçš„å¾ˆåƒï¼Œæ‰€ä»¥å°±ç§°ä¸º <code>hooks</code></p></blockquote> <p><code>VueUse</code>ï¼šhttps://vueuse.org/</p> <p><img src="https://files.mdnice.com/user/16854/cbf73b46-d22b-44e7-bca1-c33764e41784.png" alt=""></p> <p>çœ‹åˆ°è¿™ä¸ªåº“çš„ç¬¬ä¸€çœ¼ï¼Œè®©æˆ‘ç«‹é©¬æƒ³åˆ°äº† react çš„ <code>ahooks</code></p> <p><code>VueUse</code> æ˜¯ä¸€ä¸ªåŸºäº <code>Composition API</code> çš„å®ç”¨å‡½æ•°é›†åˆã€‚é€šä¿—çš„æ¥è¯´ï¼Œè¿™å°±æ˜¯ä¸€ä¸ª<code>å·¥å…·å‡½æ•°</code>åŒ…ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå®ç°ä¸€äº›å¸¸è§çš„åŠŸèƒ½ï¼Œå…å¾—ä½ è‡ªå·±å»å†™ï¼Œè§£å†³é‡å¤çš„å·¥ä½œå†…å®¹ã€‚ä»¥åŠè¿›è¡Œäº†åŸºäº Composition API çš„å°è£…ã€‚è®©ä½ åœ¨ vue3 ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p> <p>ğŸ’¡ æƒ³è¦å…¥æ‰‹ vue3 çš„å°ä¼™ä¼´ï¼Œèµ¶å¿«å­¦ä¹ èµ·æ¥å§ï¼ï¼ï¼</p> <h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="header-anchor">#</a> å†™åœ¨æœ€å</h2> <blockquote><p><code>å…¬ä¼—å·</code>ï¼š<code>å‰ç«¯å¼€å‘çˆ±å¥½è€…</code> ä¸“æ³¨åˆ†äº« <code>web</code> å‰ç«¯ç›¸å…³<code>æŠ€æœ¯æ–‡ç« </code>ã€<code>è§†é¢‘æ•™ç¨‹</code>èµ„æºã€çƒ­ç‚¹èµ„è®¯ç­‰ï¼Œå¦‚æœå–œæ¬¢æˆ‘çš„åˆ†äº«ï¼Œç»™ ğŸŸğŸŸ ç‚¹ä¸€ä¸ª<code>èµ</code> ğŸ‘ æˆ–è€… â•<code>å…³æ³¨</code> éƒ½æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒã€‚</p></blockquote> <p>æ¬¢è¿<code>é•¿æŒ‰å›¾ç‰‡åŠ å¥½å‹</code>ï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´å’Œä½ åˆ†äº«<code>å‰ç«¯è¡Œä¸šè¶‹åŠ¿</code>ï¼Œ<code>é¢è¯•èµ„æº</code>ï¼Œ<code>å­¦ä¹ é€”å¾„</code>ç­‰ç­‰ã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/engineer/cli.html" class="prev">
        ä» 0 æ‰“é€ å±äºè‡ªå·±çš„è„šæ‰‹æ¶
      </a></span> <span class="next"><a href="/blog/engineer/library-template.html">
        ä» 0 æ­å»º rollup + typescript + jest å·¥å…·åº“
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.92dc81f6.js" defer></script><script src="/assets/js/2.2d54ebdc.js" defer></script><script src="/assets/js/5.1898d05c.js" defer></script>
  </body>
</html>
